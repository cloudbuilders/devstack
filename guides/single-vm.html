<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Single Machine Guide - DevStack</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../assets/css/bootstrap.css" rel="stylesheet">
    <link href="../assets/css/local.css" rel="stylesheet">
    <style type="text/css">
      body { padding-top: 60px; }
      dd { padding: 10px; }
    </style>
    
    <!-- Le javascripts -->
    <script src="../assets/js/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../assets/js/bootstrap.js" type="text/javascript" charset="utf-8"></script>
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">DevStack</a>
          <ul class="nav">
            <li><a href="http://github.com/openstack-dev/devstack">GitHub</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <section id="overview">
        <h1>Running a Cloud in a VM</h1>
        <p>Use the cloud to build the cloud! Use your cloud to launch new versions of OpenStack 
        in about 5 minutes.  When you break it, start over!  The VMs launched in the cloud will 
        be slow as they are running in QEMU (emulation), but their primary use is testing
        OpenStack development and operation.  Speed not required.</p>
      </section>

      <section id="prerequisites">
        <div class="page-header">
          <h2>Prerequisites <small>Cloud & Image</small></h2>
        </div>

        <h3>Virtual Machine</h3>
        <p>DevStack should run in any virtual machine running a supported Ubuntu, Fedora or CentOS/RHEL
        release.  It needs at least 1.2Gb of RAM in order to launch an m1.tiny VM; if you leave 
        out Swift, 1Gb will do.</p>

        <h3>OpenStack Deployment &amp; cloud-init</h3>
        <p>If the cloud service has an image with <code>cloud-init</code> pre-installed, use it.  You can
        get one from <a href="http://uec-images.ubuntu.com/oneiric/current">Ubuntu's Daily Build</a>
        site if necessary.  This will enable you to launch VMs with userdata that installs 
        everything at boot time.</p>

        <p>If you are directly using a hypervisor like Xen, kvm or VirtualBox you can manually kick off
        the script below in a bare-bones server installation.</p>
      </section>

      <section id="requirements">
        <div class="page-header">
          <h2>Installation <small>shake and bake</small></h2>
        </div>

        <h3>Launching with using Userdata</h3>
        <p>The userdata script grabs the latest version of DevStack via git, creates a minimal 
        <code>localrc</code> file and kicks off <code>stack.sh</code>.</p>
        <pre>#!/bin/sh
apt-get update || yum update -y
apt-get install -qqy git || yum install -y git
git clone https://github.com/openstack-dev/devstack.git
cd devstack
echo ADMIN_PASSWORD=password &gt; localrc
echo MYSQL_PASSWORD=password &gt;&gt; localrc
echo RABBIT_PASSWORD=password &gt;&gt; localrc
echo SERVICE_PASSWORD=password &gt;&gt; localrc
echo SERVICE_TOKEN=tokentoken &gt;&gt; localrc
./stack.sh</pre>

        <h3>Launching By Hand</h3>
        <p>Using a hypervisor directly, launch the VM and either manually perform the steps in the 
        script above or copy it into the VM.</p>

        <h3>Using OpenStack</h3>
        <p>At this point you should be able to access the dashboard.  Launch VMs and if you give them floating IPs access those VMs from other machines on your network.</p>

        <p>One interesting use case is for developers working on a VM on their laptop.  Once
        <code>stack.sh</code> has completed once, all of the pre-requisite packages are installed
        in the VM and the source trees checked out.  Setting <code>OFFLINE=True</code> in
        <code>localrc</code> enables <code>stack.sh</code> to run multiple times without an Internet
        connection.  DevStack, making hacking at the lake possible since 2012!</p>
      </section>

      <footer>
        <p>&copy; Openstack Foundation 2011-2013 &mdash; this is not an official OpenStack project...</p>
      </footer>

    </div> <!-- /container -->

  </body>
</html>
